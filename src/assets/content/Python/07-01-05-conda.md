---
title: "Conda"
order: 7.01.05
parent: "07-01-environnements.md"
tags: ["python", "conda", "environnement", "anaconda"]
---

# Conda

Conda est un gestionnaire de packages et d'environnements qui gère non seulement les packages Python, mais aussi les dépendances système (bibliothèques C, etc.). C'est particulièrement utile pour la data science et le calcul scientifique.

## Concepts de base

**Conda** est plus qu'un gestionnaire de packages Python :
- Gère les **packages Python** et les **dépendances non-Python** (C, C++, Fortran, etc.)
- Crée des **environnements isolés** avec des versions spécifiques de Python
- Gère les **conflits de dépendances** de manière sophistiquée
- Fournit des **packages précompilés** (conda-forge, Anaconda)

### Quand utiliser Conda ?

- **Data Science** : NumPy, Pandas, scikit-learn avec leurs dépendances C
- **Calcul scientifique** : Bibliothèques avec dépendances système complexes
- **Environnements avec Python spécifique** : Besoin d'une version précise de Python
- **Packages non disponibles sur PyPI** : Packages uniquement sur conda-forge

## Installation

### Installation de Miniconda

```bash
# Télécharger et installer Miniconda
# https://docs.conda.io/en/latest/miniconda.html

# Vérifier l'installation
conda --version
```

### Installation d'Anaconda

Anaconda inclut Conda + beaucoup de packages préinstallés (plus lourd) :

```bash
# Télécharger depuis https://www.anaconda.com/
# Anaconda inclut conda + packages data science
```

## Création d'environnements

### Créer un environnement

```bash
# Créer un environnement avec Python 3.9
conda create -n mon-env python=3.9

# Créer avec des packages
conda create -n mon-env python=3.9 numpy pandas

# Créer depuis un fichier environment.yml
conda env create -f environment.yml
```

### Activer/Désactiver

```bash
# Activer un environnement
conda activate mon-env

# Désactiver
conda deactivate

# Lister les environnements
conda env list
```

## Gestion des packages

### Installation

```bash
# Installer un package
conda install numpy

# Installer depuis conda-forge
conda install -c conda-forge package

# Installer une version spécifique
conda install numpy=1.21.0

# Installer depuis PyPI (avec pip dans l'environnement conda)
conda activate mon-env
pip install package  # Utilise pip dans l'environnement conda
```

### Mise à jour

```bash
# Mettre à jour un package
conda update numpy

# Mettre à jour tous les packages
conda update --all

# Mettre à jour conda lui-même
conda update conda
```

### Désinstallation

```bash
# Désinstaller un package
conda remove numpy

# Désinstaller plusieurs packages
conda remove numpy pandas
```

## environment.yml

### Format de base

Le fichier `environment.yml` décrit un environnement conda :

```yaml
name: mon-env
channels:
  - conda-forge
  - defaults
dependencies:
  - python=3.9
  - numpy>=1.20.0
  - pandas>=1.3.0
  - pip
  - pip:
    - requests>=2.25.0  # Packages depuis PyPI
```

### Exemple complet

```yaml
name: data-science-env
channels:
  - conda-forge
  - defaults
dependencies:
  - python=3.9
  - numpy=1.21.0
  - pandas=1.3.0
  - matplotlib=3.4.0
  - jupyter
  - pip
  - pip:
    - some-pypi-only-package
```

### Utilisation

```bash
# Créer depuis environment.yml
conda env create -f environment.yml

# Exporter un environnement
conda env export > environment.yml

# Exporter sans chemins (portable)
conda env export --no-builds > environment.yml
```

## Avantages de Conda

### Gestion des dépendances non-Python

```bash
# Conda gère les dépendances C/C++
conda install numpy  # Installe aussi les bibliothèques C nécessaires

# pip ne peut pas faire ça
pip install numpy  # Nécessite que les dépendances C soient déjà installées
```

### Versions de Python

```bash
# Créer un environnement avec Python 3.8
conda create -n py38 python=3.8

# Créer un environnement avec Python 3.11
conda create -n py311 python=3.11

# Facile de gérer plusieurs versions
```

### Résolution de dépendances

```bash
# Conda résout les conflits de manière sophistiquée
conda install package-a package-b
# Résout automatiquement les conflits de dépendances
```

## Comparaison avec venv + pip

### venv + pip

```bash
# ✅ Simple, standard
python -m venv venv
source venv/bin/activate
pip install numpy  # ⚠️ Nécessite que les dépendances C soient installées
```

### Conda

```bash
# ✅ Gère tout (Python + dépendances système)
conda create -n env python=3.9
conda activate env
conda install numpy  # ✅ Installe aussi les dépendances C
```

## Cas d'usage

### Cas d'usage 1 : Data Science

```bash
# Environnement data science complet
conda create -n datascience python=3.9
conda activate datascience
conda install numpy pandas matplotlib scikit-learn jupyter
```

### Cas d'usage 2 : Calcul scientifique

```bash
# Packages avec dépendances C complexes
conda create -n scientific python=3.9
conda activate scientific
conda install -c conda-forge numpy scipy matplotlib
```

### Cas d'usage 3 : Multiples versions de Python

```bash
# Gérer plusieurs projets avec différentes versions
conda create -n projet-py38 python=3.8
conda create -n projet-py39 python=3.9
conda create -n projet-py310 python=3.10
```

## Bonnes pratiques

### 1. Utilisez conda-forge pour plus de packages

```bash
# ✅ Ajouter conda-forge
conda config --add channels conda-forge
conda config --set channel_priority strict

# Installer depuis conda-forge
conda install -c conda-forge package
```

### 2. Mélangez conda et pip avec précaution

```bash
# ✅ Installer d'abord avec conda
conda install numpy pandas

# ✅ Utiliser pip seulement pour les packages non disponibles
pip install some-pypi-only-package

# ⚠️ Éviter de mélanger trop (peut causer des conflits)
```

### 3. Versionnez environment.yml

```bash
# ✅ Exporter et versionner
conda env export --no-builds > environment.yml
git add environment.yml
```

## Points clés à retenir

- ✅ Conda gère les **packages Python ET les dépendances système**
- ✅ Parfait pour la **data science** et le **calcul scientifique**
- ✅ Gère facilement **plusieurs versions de Python**
- ✅ Utilise `environment.yml` pour **documenter les environnements**
- ✅ `conda-forge` fournit **beaucoup de packages précompilés**
- ✅ Plus **lourd** que venv mais plus **puissant**
- ✅ Utilisez conda pour les **dépendances complexes**, venv pour les **projets simples**

Conda est l'outil de choix pour la data science et les projets avec des dépendances système complexes. Pour les projets Python simples, venv + pip suffit généralement.
