---
title: "pip"
order: 7.01.02
parent: "07-01-environnements.md"
tags: ["python", "pip", "packages", "dependances"]
---

# pip

`pip` est le gestionnaire de packages standard de Python, permettant d'installer et gérer les dépendances. C'est l'outil le plus utilisé dans l'écosystème Python.

## Concepts de base

**pip** (Pip Installs Packages) est le gestionnaire de packages officiel de Python. Il permet de :
- Installer des packages depuis PyPI (Python Package Index)
- Gérer les versions de packages
- Désinstaller des packages
- Lister les packages installés
- Rechercher des packages

pip est inclus avec Python depuis Python 3.4+ (ou peut être installé séparément).

## Installation de packages

### Installation basique

```bash
# Installer un package
pip install requests

# Installer une version spécifique
pip install requests==2.28.0

# Installer une version minimale
pip install "requests>=2.25.0"

# Installer une plage de versions
pip install "requests>=2.25.0,<3.0.0"
```

### Installation depuis différentes sources

```bash
# Depuis PyPI (par défaut)
pip install package

# Depuis un fichier wheel
pip install package-1.0.0-py3-none-any.whl

# Depuis un fichier source
pip install package-1.0.0.tar.gz

# Depuis un dépôt Git
pip install git+https://github.com/user/repo.git

# Depuis un dépôt Git avec branche/tag
pip install git+https://github.com/user/repo.git@branch-name
pip install git+https://github.com/user/repo.git@v1.0.0

# Depuis un répertoire local
pip install /path/to/local/package

# Depuis un index personnalisé
pip install --index-url https://pypi.example.com/simple package
```

### Installation en mode développement

```bash
# Installation en mode "editable" (développement)
pip install -e /path/to/package

# Utile pour développer un package local
# Les modifications sont immédiatement visibles
```

## Gestion des versions

### Spécifier des versions

```bash
# Version exacte
pip install requests==2.28.0

# Version minimale
pip install "requests>=2.25.0"

# Version maximale
pip install "requests<3.0.0"

# Plage de versions
pip install "requests>=2.25.0,<3.0.0"

# Version compatible (selon PEP 440)
pip install "requests~=2.25.0"  # >=2.25.0,<2.26.0
```

### Mettre à jour un package

```bash
# Mettre à jour vers la dernière version
pip install --upgrade requests

# Ou
pip install -U requests

# Mettre à jour tous les packages
pip list --outdated  # Voir les packages obsolètes
pip install --upgrade package1 package2 ...
```

### Désinstaller

```bash
# Désinstaller un package
pip uninstall requests

# Désinstaller plusieurs packages
pip uninstall package1 package2

# Désinstaller sans confirmation
pip uninstall -y requests
```

## requirements.txt

### Format de base

Le fichier `requirements.txt` liste les dépendances d'un projet :

```txt
# requirements.txt
requests==2.28.0
flask>=2.0.0
django>=3.0,<4.0
pytest>=7.0.0
```

### Installation depuis requirements.txt

```bash
# Installer toutes les dépendances
pip install -r requirements.txt

# Installer avec mise à jour
pip install -r requirements.txt --upgrade
```

### Génération automatique

```bash
# Générer requirements.txt depuis l'environnement actuel
pip freeze > requirements.txt

# Contenu généré (versions exactes)
# requests==2.28.0
# flask==2.0.0
# django==3.2.0
# pytest==7.2.0
```

### Requirements avec commentaires

```txt
# requirements.txt
# Packages de production
requests>=2.25.0
flask>=2.0.0

# Packages de développement (optionnel)
pytest>=7.0.0; python_version >= '3.7'
black>=22.0.0; python_version >= '3.7'

# Packages avec dépendances système
# numpy>=1.20.0  # Nécessite des bibliothèques C
```

### Requirements multiples

```txt
# requirements.txt (base)
requests>=2.25.0
flask>=2.0.0

# requirements-dev.txt (développement)
-r requirements.txt  # Inclut les dépendances de base
pytest>=7.0.0
black>=22.0.0
mypy>=0.950

# requirements-prod.txt (production)
-r requirements.txt
gunicorn>=20.0.0
```

## Commandes essentielles

### Lister les packages

```bash
# Lister tous les packages installés
pip list

# Lister avec versions
pip list --format=columns

# Lister les packages obsolètes
pip list --outdated

# Lister un package spécifique
pip show requests
```

### Rechercher des packages

```bash
# Rechercher un package (depuis PyPI)
pip search package-name  # ⚠️ Déprécié, utilisez plutôt le site PyPI

# Voir les informations d'un package
pip show requests
```

### Vérifier les dépendances

```bash
# Vérifier les dépendances d'un package
pip show requests

# Voir l'arbre des dépendances
pip install pipdeptree
pipdeptree
```

### Cache pip

```bash
# Voir l'emplacement du cache
pip cache dir

# Vider le cache
pip cache purge

# Désactiver le cache
pip install --no-cache-dir package
```

## Bonnes pratiques

### 1. Toujours utiliser un environnement virtuel

```bash
# ✅ Bon : dans un venv
python -m venv venv
source venv/bin/activate
pip install package

# ❌ Mauvais : installation globale
pip install package  # ⚠️ Installe globalement
```

### 2. Utiliser requirements.txt

```bash
# ✅ Toujours documenter les dépendances
pip freeze > requirements.txt

# ✅ Versionner requirements.txt
git add requirements.txt
```

### 3. Spécifier les versions

```bash
# ✅ Bon : versions spécifiques en production
requests==2.28.0
flask==2.0.0

# ⚠️ Moins bon : versions flottantes (peut causer des problèmes)
requests
flask
```

### 4. Séparer dev et prod

```txt
# ✅ requirements.txt (production)
requests>=2.25.0
flask>=2.0.0

# ✅ requirements-dev.txt (développement)
-r requirements.txt
pytest>=7.0.0
black>=22.0.0
```

### 5. Mettre à jour pip régulièrement

```bash
# ✅ Mettre à jour pip
python -m pip install --upgrade pip
```

## Exemples pratiques

### Exemple 1 : Workflow complet

```bash
# 1. Créer l'environnement
python -m venv venv
source venv/bin/activate

# 2. Mettre à jour pip
pip install --upgrade pip

# 3. Installer les dépendances
pip install requests flask

# 4. Développer...

# 5. Sauvegarder
pip freeze > requirements.txt

# 6. Sur une autre machine
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

### Exemple 2 : Gestion de versions

```bash
# Installer une version spécifique
pip install "django>=3.0,<4.0"

# Vérifier la version installée
pip show django

# Mettre à jour dans la plage
pip install --upgrade "django>=3.0,<4.0"
```

### Exemple 3 : Installation depuis Git

```bash
# Package depuis GitHub
pip install git+https://github.com/user/package.git

# Version spécifique
pip install git+https://github.com/user/package.git@v1.0.0

# Branche de développement
pip install git+https://github.com/user/package.git@develop
```

### Exemple 4 : Installation conditionnelle

```txt
# requirements.txt avec conditions
requests>=2.25.0
# Windows seulement
pywin32>=300; sys_platform == "win32"
# Linux seulement
python-xlib>=0.33; sys_platform == "linux"
```

## Pièges courants

### Piège 1 : Installation globale par erreur

```bash
# ⚠️ Vérifier que venv est activé
which pip  # Doit pointer vers venv/bin/pip

# Si pip pointe vers /usr/bin/pip, l'environnement n'est pas activé
```

### Piège 2 : Versions incompatibles

```bash
# ⚠️ Conflit de versions
pip install package-a==1.0.0
pip install package-b==2.0.0  # Peut nécessiter package-a==2.0.0

# ✅ Vérifier les conflits
pip check
```

### Piège 3 : Oublier de mettre à jour requirements.txt

```bash
# ⚠️ Installation sans mise à jour du fichier
pip install nouveau-package
# requirements.txt n'est pas à jour

# ✅ Toujours mettre à jour
pip install nouveau-package
pip freeze > requirements.txt
```

## Commandes avancées

### Installation avec contraintes

```bash
# Installer avec un fichier de contraintes
pip install -c constraints.txt package
```

### Installation sans dépendances

```bash
# Installer sans dépendances
pip install --no-deps package
```

### Installation forcée

```bash
# Réinstaller même si déjà installé
pip install --force-reinstall package
```

### Installation en mode utilisateur

```bash
# Installer dans le répertoire utilisateur (sans venv)
pip install --user package
```

## Points clés à retenir

- ✅ `pip` est le **gestionnaire de packages standard** de Python
- ✅ **Toujours utiliser dans un venv** (jamais globalement)
- ✅ Utilisez `requirements.txt` pour **documenter les dépendances**
- ✅ Spécifiez les **versions** pour la reproductibilité
- ✅ `pip freeze` génère les **versions exactes**
- ✅ Mettez à jour pip régulièrement : `pip install --upgrade pip`
- ✅ Utilisez `pip list --outdated` pour voir les **packages obsolètes**
- ✅ `pip check` vérifie les **conflits de dépendances**

pip est l'outil fondamental pour gérer les packages Python. Maîtriser ses commandes et bonnes pratiques est essentiel pour tout développeur Python.
