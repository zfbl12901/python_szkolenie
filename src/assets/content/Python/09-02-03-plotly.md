---
title: "Plotly"
order: 9.02.03
parent: "09-02-visualisation.md"
tags: ["python", "plotly", "visualisation", "interactif"]
---

# Plotly

Plotly permet de créer des visualisations interactives et modernes, idéales pour les dashboards et les présentations web.

## Concepts de base

**Plotly** fournit :
- **Graphiques interactifs** : Zoom, pan, hover, etc.
- **Dashboards** : Applications web interactives
- **Export** : HTML, images, etc.
- **Modernité** : Visualisations web modernes

### Pourquoi Plotly ?

- **Interactivité** : Graphiques avec zoom, hover, etc.
- **Web** : Intégration facile dans les applications web
- **Dashboards** : Créer des dashboards complets
- **Modernité** : Visualisations attrayantes

## Installation et configuration

### Installation

```bash
# Installer Plotly
pip install plotly

# Pour les dashboards
pip install dash

# Ou avec Poetry
poetry add plotly dash
```

### Import

```python
import plotly.graph_objects as go
import plotly.express as px
import pandas as pd
```

## Graphiques interactifs

### Graphique simple avec Plotly Express

```python
import plotly.express as px
import pandas as pd

# Données
df = pd.DataFrame({
    'x': [1, 2, 3, 4, 5],
    'y': [2, 4, 6, 8, 10]
})

# Graphique en ligne
fig = px.line(df, x='x', y='y', title='Graphique interactif')
fig.show()
```

### Graphique avec graph_objects

```python
import plotly.graph_objects as go

# Graphique en ligne
fig = go.Figure()
fig.add_trace(go.Scatter(x=[1, 2, 3, 4], y=[10, 11, 12, 13],
                        mode='lines+markers', name='Ligne 1'))
fig.add_trace(go.Scatter(x=[1, 2, 3, 4], y=[12, 13, 14, 15],
                        mode='lines+markers', name='Ligne 2'))
fig.update_layout(title='Graphique interactif', xaxis_title='X', yaxis_title='Y')
fig.show()
```

### Types de graphiques

```python
import plotly.express as px
import pandas as pd
import numpy as np

# Données
df = pd.DataFrame({
    'catégorie': ['A', 'B', 'C', 'D'],
    'valeur': [10, 20, 30, 40]
})

# Barres
fig = px.bar(df, x='catégorie', y='valeur', title='Graphique en barres')
fig.show()

# Scatter
df2 = pd.DataFrame({
    'x': np.random.randn(100),
    'y': np.random.randn(100),
    'taille': np.random.randint(10, 100, 100)
})
fig = px.scatter(df2, x='x', y='y', size='taille', title='Nuage de points')
fig.show()

# Histogramme
data = np.random.normal(100, 15, 1000)
fig = px.histogram(x=data, title='Histogramme')
fig.show()
```

## Dashboards

### Dashboard simple avec Dash

```python
import dash
from dash import dcc, html
import plotly.express as px
import pandas as pd

# Données
df = pd.DataFrame({
    'mois': ['Jan', 'Feb', 'Mar', 'Apr', 'May'],
    'ventes': [100, 150, 200, 180, 220]
})

# Créer l'application
app = dash.Dash(__name__)

# Créer le graphique
fig = px.bar(df, x='mois', y='ventes', title='Ventes par mois')

# Layout
app.layout = html.Div([
    html.H1('Dashboard de ventes'),
    dcc.Graph(figure=fig)
])

# Lancer
if __name__ == '__main__':
    app.run_server(debug=True)
```

### Dashboard avec interactions

```python
import dash
from dash import dcc, html, Input, Output
import plotly.express as px
import pandas as pd

# Données
df = pd.DataFrame({
    'mois': ['Jan', 'Feb', 'Mar'] * 2,
    'produit': ['A'] * 3 + ['B'] * 3,
    'ventes': [100, 150, 200, 80, 120, 160]
})

app = dash.Dash(__name__)

app.layout = html.Div([
    html.H1('Dashboard interactif'),
    dcc.Dropdown(
        id='produit-dropdown',
        options=[{'label': p, 'value': p} for p in df['produit'].unique()],
        value='A'
    ),
    dcc.Graph(id='ventes-graph')
])

@app.callback(
    Output('ventes-graph', 'figure'),
    Input('produit-dropdown', 'value')
)
def update_graph(produit):
    filtered_df = df[df['produit'] == produit]
    fig = px.bar(filtered_df, x='mois', y='ventes', title=f'Ventes - {produit}')
    return fig

if __name__ == '__main__':
    app.run_server(debug=True)
```

## Export et partage

### Export HTML

```python
import plotly.express as px

fig = px.bar(x=['A', 'B', 'C'], y=[1, 2, 3])
fig.write_html('graphique.html')  # Fichier HTML interactif
```

### Export image

```python
# Nécessite kaleido
# pip install kaleido

fig.write_image('graphique.png')  # PNG
fig.write_image('graphique.pdf')  # PDF
fig.write_image('graphique.svg')  # SVG
```

## Cas d'usage

### Cas d'usage 1 : Visualisation de données temporelles

```python
import plotly.express as px
import pandas as pd
import numpy as np

# Données temporelles
dates = pd.date_range('2024-01-01', periods=100, freq='D')
df = pd.DataFrame({
    'date': dates,
    'valeur': np.random.randn(100).cumsum(),
    'catégorie': np.random.choice(['A', 'B'], 100)
})

# Graphique temporel interactif
fig = px.line(df, x='date', y='valeur', color='catégorie',
              title='Évolution temporelle')
fig.update_xaxes(rangeslider_visible=True)  # Slider pour zoom
fig.show()
```

### Cas d'usage 2 : Carte de chaleur interactive

```python
import plotly.express as px
import numpy as np

# Matrice de données
data = np.random.randn(10, 10)

# Heatmap
fig = px.imshow(data, color_continuous_scale='Viridis',
                title='Carte de chaleur interactive')
fig.show()
```

## Points clés à retenir

- ✅ Plotly crée des **graphiques interactifs** (zoom, hover, etc.)
- ✅ **Dash** : Framework pour créer des dashboards web
- ✅ **Export** : HTML, images, etc.
- ✅ **Web** : Intégration facile dans applications web
- ✅ **Modernité** : Visualisations attrayantes
- ✅ Parfait pour **dashboards** et **présentations interactives**

Plotly est idéal pour créer des visualisations interactives modernes, particulièrement pour les dashboards et les applications web.
